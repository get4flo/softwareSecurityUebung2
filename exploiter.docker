FROM debian:latest@sha256:18023f131f52fc3ea21973cabffe0b216c60b417fd2478e94d9d59981ebba6af

WORKDIR /code

RUN apt update
RUN apt install -y socat python3 python3-pip
RUN pip install pwntools --break-system-packages

RUN useradd -s /bin/bash ssl

COPY ./homework .
COPY ./libc.so.6 .

RUN chown ssl:ssl ./homework
RUN chown ssl:ssl ./libc.so.6

USER ssl

ENTRYPOINT python3 ./exploit.py LOCAL_LIBC HOST=homework PORT=1337
